<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_14) on Mon Dec 17 23:22:10 EST 2007 -->
<TITLE>
PivotTreeBuilder
</TITLE>

<META NAME="keywords" CONTENT="org.firewaterframework.mappers.jdbc.PivotTreeBuilder class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="PivotTreeBuilder";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../org/firewaterframework/mappers/jdbc/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/firewaterframework/mappers/jdbc/JDBCMapper.html" title="class in org.firewaterframework.mappers.jdbc"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/firewaterframework/mappers/jdbc/QueryMapper.html" title="class in org.firewaterframework.mappers.jdbc"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="PivotTreeBuilder.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.firewaterframework.mappers.jdbc</FONT>
<BR>
Class PivotTreeBuilder</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>org.firewaterframework.mappers.jdbc.PivotTreeBuilder</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>PivotTreeBuilder</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
This class maps flat SQL result sets into heirarchical XML documents.  It is used
 by the QueryMapper to resolve SQL 'select' queries into their equivalent REST XML.  It uses
 the central concept of a Pivot Tree as the basis of it's transformation.  A Pivot
 Tree is simply a table containing the cross-product of properties present in every
 resource.  The table must be ordered by 'pivot columns', which are typically the
 primary keys of the underlying joined tables.  The PivotTreeBuilder will iterate
 over the tabular result set, creating a single XML node for each unique value of
 it's pivot column.  If there are duplicate values for the pivot column in consecutive
 rows, the class will delegate the processing of these rows to it's 'subnodes', which are
 also PivotTreeBuilders, and will append the XML element results as children of the current
 XML node.
 <p>
 Assuming we have a tables Owner(id, name, address, city, state, zip) and
 Pet(id, name, owner), here's an example of configuring a PivotTreeBuilder
 using a Spring configuration to fetch all users and their pets (mapped to
 the <code>/users</code> URL:
 <p>
 <code><pre>
   <bean id="usersGetMapper" class="org.firewaterframework.mappers.jdbc.QueryMapper">
      <property name="query">
          <value>
              select  u.id as user, p.id as pet, p.name as pet_name, u.name as name,
              from user u
              left outer join pet p on u.id = p.owner_id
              order by u.id,
          </value>
      </property>
      <property name="dataSource" ref="dataSource"/>
      <property name="pivotTreeBuilder">
          <bean class="org.firewaterframework.mappers.jdbc.PivotTreeBuilder">
              <property name="pivotColumn" value="user"/>
              <property name="pivotURLSelector" value="users"/>
              <property name="attributeColumnList">
                  <list>
                      <value>name</value>
                     <value>city</value>
                  </list>
              </property>
              <property name="subNodes">
                  <list>
                      <bean class="org.firewaterframework.mappers.jdbc.PivotTreeBuilder">
                          <property name="pivotColumn" value="pet"/>
                          <property name="pivotURLSelector" value="pets"/>
                          <property name="attributeColumns">
                              <map>
                                  <entry key="pet_name" value="name"/>
                              </map>
                          </property>
                      </bean>
                  </list>
              </property>
         </bean>
     </property>
 </bean>
</pre></code
 <p>
 After a sucessful call to the GET method on the <code>/users</code> resource.  We
 would get a Response with an XML payload like:
 <p>
 <code><pre>
 <result>
     <user url="/users/4" id="4" name="jim morrison" city="new york">
         <pet url="/users/4/pets/3" id="3" name="flopsy"/>
     </user>
     <user url="/users/5" id="5" name="eddie van halen" city="los angeles"/>
     <user url="/users/0" id="0" name="joe who" city="new york"/>
     <user url="/users/1" id="1" name="willie nelson" city="chatanooga">
         <pet url="/users/1/pets/0" id="0" name="trixie"/>
         <pet url="/users/1/pets/1" id="1" name="wixie"/>
         <pet url="/users/1/pets/4" id="4" name="mixie"/>
     </user>
  </result>
<P>

<P>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.util.Map&lt;java.lang.String,java.lang.String&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#attributeColumns">attributeColumns</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this maps the name of the column in the result set (the key) with the name of
 the XML attribute in the result.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;org.dom4j.DocumentFactory</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#df">df</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;org.apache.commons.logging.Log</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#log">log</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#pivotColumn">pivotColumn</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this identifies which column in the result set to 'pivot' on.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#pivotTag">pivotTag</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the pivotTag and pivotTagAttribute work together to create the XML element name for each
 'row' in the result set.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#pivotTagAttribute">pivotTagAttribute</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#pivotURLSelector">pivotURLSelector</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this property is used to select a name for the 'url' attribute for each node.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html" title="class in org.firewaterframework.mappers.jdbc">PivotTreeBuilder</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#subNodes">subNodes</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;these represent the PivotTreeBuilders that will create the subnodes in our
 response XML document.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#PivotTreeBuilder()">PivotTreeBuilder</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#PivotTreeBuilder(java.lang.String, java.lang.String, java.lang.String, java.lang.String[], java.lang.String[], org.firewaterframework.mappers.jdbc.PivotTreeBuilder[])">PivotTreeBuilder</A></B>(java.lang.String&nbsp;pivotTag,
                 java.lang.String&nbsp;pivotURLSelector,
                 java.lang.String&nbsp;pivotColumn,
                 java.lang.String[]&nbsp;attributeColumnColumnNames,
                 java.lang.String[]&nbsp;attributeColumnTagNames,
                 <A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html" title="class in org.firewaterframework.mappers.jdbc">PivotTreeBuilder</A>[]&nbsp;subNodes)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this constructor is typically only used by jUnit test cases.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.Map&lt;java.lang.String,java.lang.String&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#getAttributeColumns()">getAttributeColumns</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#getInternalPivotTag(java.util.Map)">getInternalPivotTag</A></B>(java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;row)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#getPivotColumn()">getPivotColumn</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#getPivotTag()">getPivotTag</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#getPivotTagAttribute()">getPivotTagAttribute</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#getPivotURLSelector()">getPivotURLSelector</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html" title="class in org.firewaterframework.mappers.jdbc">PivotTreeBuilder</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#getSubNodes()">getSubNodes</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;org.dom4j.Document</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#process(java.util.List)">process</A></B>(java.util.List&lt;java.util.Map&lt;java.lang.String,java.lang.Object&gt;&gt;&nbsp;rows)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;top level interface to process PivotTree result sets.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#processCurrentRow(java.util.Map, org.dom4j.Element)">processCurrentRow</A></B>(java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;row,
                  org.dom4j.Element&nbsp;element)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;org.dom4j.Element</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#processNextElement(java.util.List, int[], java.lang.String)">processNextElement</A></B>(java.util.List&lt;java.util.Map&lt;java.lang.String,java.lang.Object&gt;&gt;&nbsp;rows,
                   int[]&nbsp;rowNum,
                   java.lang.String&nbsp;url)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the method to recursively parse and build a single element.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#setAttributeColumnList(java.util.List)">setAttributeColumnList</A></B>(java.util.List&lt;java.lang.String&gt;&nbsp;attributeColumns)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#setAttributeColumns(java.util.Map)">setAttributeColumns</A></B>(java.util.Map&lt;java.lang.String,java.lang.String&gt;&nbsp;attributeColumns)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#setPivotColumn(java.lang.String)">setPivotColumn</A></B>(java.lang.String&nbsp;pivotColumn)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#setPivotTag(java.lang.String)">setPivotTag</A></B>(java.lang.String&nbsp;pivotTag)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#setPivotTagAttribute(java.lang.String)">setPivotTagAttribute</A></B>(java.lang.String&nbsp;pivotTagAttribute)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#setPivotURLSelector(java.lang.String)">setPivotURLSelector</A></B>(java.lang.String&nbsp;pivotURLSelector)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html#setSubNodes(org.firewaterframework.mappers.jdbc.PivotTreeBuilder[])">setSubNodes</A></B>(<A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html" title="class in org.firewaterframework.mappers.jdbc">PivotTreeBuilder</A>[]&nbsp;subNodes)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="log"><!-- --></A><H3>
log</H3>
<PRE>
protected static final org.apache.commons.logging.Log <B>log</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="df"><!-- --></A><H3>
df</H3>
<PRE>
protected static org.dom4j.DocumentFactory <B>df</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="pivotTag"><!-- --></A><H3>
pivotTag</H3>
<PRE>
protected java.lang.String <B>pivotTag</B></PRE>
<DL>
<DD>the pivotTag and pivotTagAttribute work together to create the XML element name for each
 'row' in the result set.  To always create the same name (ie. a heterogeneous collection of rows) just
 statically set the pivotTag value.  If you want to determine the name of the element dynamically
 set the pivotTagAttribute to the name of the property in the row that contains the element name.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="pivotTagAttribute"><!-- --></A><H3>
pivotTagAttribute</H3>
<PRE>
protected java.lang.String <B>pivotTagAttribute</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="pivotURLSelector"><!-- --></A><H3>
pivotURLSelector</H3>
<PRE>
protected java.lang.String <B>pivotURLSelector</B></PRE>
<DL>
<DD>this property is used to select a name for the 'url' attribute for each node.  As
 the builder recursively descends the subnodes, URLs are built up by concatenating
 their id and pivotURLSelector values.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="pivotColumn"><!-- --></A><H3>
pivotColumn</H3>
<PRE>
protected java.lang.String <B>pivotColumn</B></PRE>
<DL>
<DD>this identifies which column in the result set to 'pivot' on.  It is typically
 the primary key column of the underlying table/resource
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="attributeColumns"><!-- --></A><H3>
attributeColumns</H3>
<PRE>
protected java.util.Map&lt;java.lang.String,java.lang.String&gt; <B>attributeColumns</B></PRE>
<DL>
<DD>this maps the name of the column in the result set (the key) with the name of
 the XML attribute in the result.  If the names are exactly the same, use the
 convenience method setAttributeColumnList()
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="subNodes"><!-- --></A><H3>
subNodes</H3>
<PRE>
protected <A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html" title="class in org.firewaterframework.mappers.jdbc">PivotTreeBuilder</A>[] <B>subNodes</B></PRE>
<DL>
<DD>these represent the PivotTreeBuilders that will create the subnodes in our
 response XML document.  When we find adjacent rows with duplicate values for
 the pivotColumn, delegate to the subNodes to process.
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="PivotTreeBuilder()"><!-- --></A><H3>
PivotTreeBuilder</H3>
<PRE>
public <B>PivotTreeBuilder</B>()</PRE>
<DL>
</DL>
<HR>

<A NAME="PivotTreeBuilder(java.lang.String, java.lang.String, java.lang.String, java.lang.String[], java.lang.String[], org.firewaterframework.mappers.jdbc.PivotTreeBuilder[])"><!-- --></A><H3>
PivotTreeBuilder</H3>
<PRE>
public <B>PivotTreeBuilder</B>(java.lang.String&nbsp;pivotTag,
                        java.lang.String&nbsp;pivotURLSelector,
                        java.lang.String&nbsp;pivotColumn,
                        java.lang.String[]&nbsp;attributeColumnColumnNames,
                        java.lang.String[]&nbsp;attributeColumnTagNames,
                        <A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html" title="class in org.firewaterframework.mappers.jdbc">PivotTreeBuilder</A>[]&nbsp;subNodes)</PRE>
<DL>
<DD>this constructor is typically only used by jUnit test cases.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>pivotTag</CODE> - <DD><CODE>pivotURLSelector</CODE> - <DD><CODE>pivotColumn</CODE> - <DD><CODE>attributeColumnColumnNames</CODE> - <DD><CODE>attributeColumnTagNames</CODE> - <DD><CODE>subNodes</CODE> - </DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="process(java.util.List)"><!-- --></A><H3>
process</H3>
<PRE>
public org.dom4j.Document <B>process</B>(java.util.List&lt;java.util.Map&lt;java.lang.String,java.lang.Object&gt;&gt;&nbsp;rows)</PRE>
<DL>
<DD>top level interface to process PivotTree result sets.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>rows</CODE> - the SQL result set, a list of maps
<DT><B>Returns:</B><DD>the resultant XML document</DL>
</DD>
</DL>
<HR>

<A NAME="processNextElement(java.util.List, int[], java.lang.String)"><!-- --></A><H3>
processNextElement</H3>
<PRE>
protected org.dom4j.Element <B>processNextElement</B>(java.util.List&lt;java.util.Map&lt;java.lang.String,java.lang.Object&gt;&gt;&nbsp;rows,
                                               int[]&nbsp;rowNum,
                                               java.lang.String&nbsp;url)</PRE>
<DL>
<DD>the method to recursively parse and build a single element.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>rows</CODE> - the result set<DD><CODE>rowNum</CODE> - the current row number being processed<DD><CODE>url</CODE> - the current URL for the resource
<DT><B>Returns:</B><DD>the Element to be added to the resulting XML Document</DL>
</DD>
</DL>
<HR>

<A NAME="processCurrentRow(java.util.Map, org.dom4j.Element)"><!-- --></A><H3>
processCurrentRow</H3>
<PRE>
protected void <B>processCurrentRow</B>(java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;row,
                                 org.dom4j.Element&nbsp;element)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getPivotColumn()"><!-- --></A><H3>
getPivotColumn</H3>
<PRE>
public java.lang.String <B>getPivotColumn</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setPivotColumn(java.lang.String)"><!-- --></A><H3>
setPivotColumn</H3>
<PRE>
public void <B>setPivotColumn</B>(java.lang.String&nbsp;pivotColumn)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getAttributeColumns()"><!-- --></A><H3>
getAttributeColumns</H3>
<PRE>
public java.util.Map&lt;java.lang.String,java.lang.String&gt; <B>getAttributeColumns</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setAttributeColumns(java.util.Map)"><!-- --></A><H3>
setAttributeColumns</H3>
<PRE>
public void <B>setAttributeColumns</B>(java.util.Map&lt;java.lang.String,java.lang.String&gt;&nbsp;attributeColumns)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setAttributeColumnList(java.util.List)"><!-- --></A><H3>
setAttributeColumnList</H3>
<PRE>
public void <B>setAttributeColumnList</B>(java.util.List&lt;java.lang.String&gt;&nbsp;attributeColumns)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getSubNodes()"><!-- --></A><H3>
getSubNodes</H3>
<PRE>
public <A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html" title="class in org.firewaterframework.mappers.jdbc">PivotTreeBuilder</A>[] <B>getSubNodes</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setSubNodes(org.firewaterframework.mappers.jdbc.PivotTreeBuilder[])"><!-- --></A><H3>
setSubNodes</H3>
<PRE>
public void <B>setSubNodes</B>(<A HREF="../../../../org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html" title="class in org.firewaterframework.mappers.jdbc">PivotTreeBuilder</A>[]&nbsp;subNodes)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getPivotTag()"><!-- --></A><H3>
getPivotTag</H3>
<PRE>
public java.lang.String <B>getPivotTag</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setPivotTag(java.lang.String)"><!-- --></A><H3>
setPivotTag</H3>
<PRE>
public void <B>setPivotTag</B>(java.lang.String&nbsp;pivotTag)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getPivotURLSelector()"><!-- --></A><H3>
getPivotURLSelector</H3>
<PRE>
public java.lang.String <B>getPivotURLSelector</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setPivotURLSelector(java.lang.String)"><!-- --></A><H3>
setPivotURLSelector</H3>
<PRE>
public void <B>setPivotURLSelector</B>(java.lang.String&nbsp;pivotURLSelector)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getPivotTagAttribute()"><!-- --></A><H3>
getPivotTagAttribute</H3>
<PRE>
public java.lang.String <B>getPivotTagAttribute</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setPivotTagAttribute(java.lang.String)"><!-- --></A><H3>
setPivotTagAttribute</H3>
<PRE>
public void <B>setPivotTagAttribute</B>(java.lang.String&nbsp;pivotTagAttribute)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getInternalPivotTag(java.util.Map)"><!-- --></A><H3>
getInternalPivotTag</H3>
<PRE>
protected java.lang.String <B>getInternalPivotTag</B>(java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;row)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../org/firewaterframework/mappers/jdbc/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/firewaterframework/mappers/jdbc/JDBCMapper.html" title="class in org.firewaterframework.mappers.jdbc"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/firewaterframework/mappers/jdbc/QueryMapper.html" title="class in org.firewaterframework.mappers.jdbc"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/firewaterframework/mappers/jdbc/PivotTreeBuilder.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="PivotTreeBuilder.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
